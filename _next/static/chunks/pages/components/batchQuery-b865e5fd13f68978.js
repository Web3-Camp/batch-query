(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{597:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var n=r(9499),a=r(6687),i=r(29),c=r(6690),s=r(7794),l=r.n(s),o=r(3680),u=r(5147),d=r(2914),h=r(6968),f=r(7294),p=r(4893),x=r(2125),m=r(8865),v=r(5553),b=r(9485),g=r(5261),j=r(5893);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function k(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var w=(0,x.ZP)("div").withConfig({displayName:"batchQuery__ButtonBox",componentId:"sc-ir3ze6-0"})(["display:flex;align-items:center;.example{margin-left:20px;}.rht{margin-right:20px;}.query{margin-left:20px;}"]),O=x.ZP.div.withConfig({displayName:"batchQuery__TableBox",componentId:"sc-ir3ze6-1"})(["margin-top:40px;.tableStyle{border-top:1px solid #eee;color:#666666;th{height:60px;line-height:60px;}.first{display:flex;justify-content:center;align-items:stretch;.form-check-inline{margin-right:0;display:flex;margin-top:13px;}}td{line-height:50px;word-break:break-all;&:nth-child(4){width:30%;}}tr:nth-child(2n+1) td{background:rgba(255,255,255,0.3)!important;color:#666666!important;}tr:hover td{background:rgba(0,0,0,0.01)!important;}}"]);function Z(){var e,t=(0,p.ds)().CSVReader,r=(0,f.useState)([]),n=r[0],s=r[1],x=(0,f.useState)(),y=x[0],Z=x[1],_=(0,f.useState)([]),N=_[0],S=_[1],P=(0,f.useState)([]),E=P[0],C=P[1],A=(0,f.useState)([]),D=A[0],Q=A[1],B=(0,f.useState)(!1),q=B[0],I=B[1];(0,f.useEffect)((function(){var e=new m.Q(window.ethereum);Z(e)}),[]),(0,f.useEffect)((function(){var e=n.filter((function(e){return!0===e.checked}));C(e)}),[q,n]),(0,f.useEffect)((function(){if(E.length){var e=JSON.parse(JSON.stringify(E));e.map((function(e){delete e.checked})),Q(e)}}),[E]);var J=function(){var e=(0,i.Z)(l().mark((function e(){var t,r,i,o,u,d,h,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E.length?(t=(0,a.Z)(E),r=(0,a.Z)(Array(n.length)).fill(!0),n.map((function(e,t){r[t]=e.checked}))):(t=(0,a.Z)(n),r=(0,a.Z)(Array(n.length)).fill(!0)),S(r),i=!1,o=!1,e.prev=4,d=l().mark((function e(){var r,i,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.value,i=(0,a.Z)(n),e.next=4,null===y||void 0===y?void 0:y.getBalance(r.address);case 4:c=e.sent,t.filter((function(e){return e.address===r.address}))[0].amount=v.dF(c.toString()),s(i);case 8:case"end":return e.stop()}}),e)})),h=(0,c.Z)(t);case 7:return e.next=9,h.next();case 9:if(!(i=!(f=e.sent).done)){e.next=14;break}return e.delegateYield(d(),"t0",11);case 11:i=!1,e.next=7;break;case 14:e.next=20;break;case 16:e.prev=16,e.t1=e.catch(4),o=!0,u=e.t1;case 20:if(e.prev=20,e.prev=21,!i||null==h.return){e.next=25;break}return e.next=25,h.return();case 25:if(e.prev=25,!o){e.next=28;break}throw u;case 28:return e.finish(25);case 29:return e.finish(20);case 30:case"end":return e.stop()}}),e,null,[[4,16,20,30],[21,,25,29]])})));return function(){return e.apply(this,arguments)}}(),T=function(e){var t=e.target,r=Number(t.value);n[r].checked=!0,I(!q)};return(0,j.jsxs)("div",{children:[(0,j.jsxs)(w,{children:[(0,j.jsx)(t,{onUploadAccepted:function(e){var t=function(e){var t={};return e.reduce((function(e,r){return!t[r.address]&&(t[r.address]=e.push(r)),e}),[])}(e.data.map((function(e){return b.UJ(e[0])?{address:e[0],amount:null,checked:!1}:null})).filter((function(e){return null!=e}))),r=(0,a.Z)(Array(t.length)).fill(!1);S(r),s(t)},children:function(e){var t=e.getRootProps;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)("div",k(k({},t()),{},{className:"rht",children:(0,j.jsx)(o.Z,{variant:"flat",children:"Import CSV"})}))})}}),(0,j.jsx)(o.Z,{variant:"dark",onClick:function(){return J()},children:" Query"}),(0,j.jsx)("div",{className:"query",children:!!D.length&&(0,j.jsxs)(g.Z,{datas:D,filename:"myWallets_".concat(null===(e=D[0])||void 0===e?void 0:e.address),extension:".csv",children:[" ",(0,j.jsx)(o.Z,{variant:"dark",children:"  Download"})]})}),(0,j.jsx)("a",{className:"example",href:"/batch-query/example.csv",children:"example"})]}),(0,j.jsx)(O,{children:(0,j.jsxs)(u.Z,{striped:!0,borderless:!0,hover:!0,className:"tableStyle",children:[(0,j.jsx)("thead",{children:(0,j.jsxs)("tr",{children:[(0,j.jsx)("th",{children:"#"}),(0,j.jsx)("th",{children:"index"}),(0,j.jsx)("th",{children:"Address"}),(0,j.jsx)("th",{children:"Amount"})]})}),(0,j.jsx)("tbody",{children:n.map((function(e,t){return(0,j.jsxs)("tr",{children:[(0,j.jsx)("td",{children:(0,j.jsx)("div",{className:"first",children:(0,j.jsx)(d.Z.Check,{inline:!0,type:"checkbox",id:"default-checkbox_".concat(t),value:t,name:"selectValue",onChange:T})})}),(0,j.jsx)("td",{children:t+1}),(0,j.jsx)("td",{children:e.address}),(0,j.jsxs)("td",{children:[null==e.amount&&N[t]&&(0,j.jsx)(h.Z,{animation:"border",variant:"dark"}),e.amount]})]},t)}))})]})})]})}},4193:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/components/batchQuery",function(){return r(597)}])},6601:function(){}},function(e){e.O(0,[858,774,888,179],(function(){return t=4193,e(e.s=t);var t}));var t=e.O();_N_E=t}]);